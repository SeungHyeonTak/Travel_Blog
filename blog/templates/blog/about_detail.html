{% extends 'index.html' %}{% block extra_script %}<style type="text/javascript">    $(function() {    // 1. 누구한테 이벤트를 설정할것이냐?    // 2. 어떤 이벤트를 설정할것이냐?    $('#comment_form').submit(function(e) {        e.preventDefault();        alert('댓글쓰기 완료');        // 댓글 남기기        $('input[name="is_ajax"]').val("1");        url = $(this).attr('action');        params = $(this).serialize();        $.ajax({            url:url,            method:"POST",            data:params        }).done(function(data) {            // 댓글 입력창 내용 비우기            $('#id_text').val("");            $('#comment_list tbody').prepend(data.html); // tbody 시작 지점에 요소 끼워넣기            // is_ajax 값 초기화            $('input[name="is_ajax"]').val("");        });        location.reload();        return false;    });    $('.btn_comment_delete').click(function(e) {        e.preventDefault();        var input = confirm('댓글을 삭제하시겠습니까?');        if (input==true) {            comment = $(this).parents('tr'); // 버튼을 감싸고 있는 tr 찾기            url = $(this).attr('href')+"?is_ajax=1"; // ajax 호출임을 구분할 수 있게 값 추가            // $.ajax({}).done(function(){}); 먼저 작성하고 내용 입력해라.            $.ajax({                url:url            }).done(function(data) {                if (data.works) {                    comment.remove(); // 해당 객체 지우기                }            });        }    });    $('.btn_comment_update').click(function(e) {        e.preventDefault();        url = $(this).attr('href')+'?is_ajax=1';        comment = $(this).parent().siblings('.comment_text'); // 원래 댓글을 찾음        input = "<input type='text' class='update_text' value='"+comment.text()+"'>";        comment.html(input);        $('.update_text').keypress(function(e){            if (e.keyCode==13) {                text = $(this).val();                $.ajax({                    url:url,                    data:{                        text:text                    }                }).done(function(data) {                    if(data.works) {                        comment.text(text);                    }                });            }        });        return false;        text = prompt('수정될 댓글 내용을 입력하세요.', comment.text()); // 원래 댓글을 프롬프트로 보여줌        if (text==null) return false; // 입력 취소면 함수 종료        $.ajax({            url:url,            data:{                text:text            }        }).done(function(data) {            if(data.works) {                comment.text(text);            }        });    });});</style>{% endblock %}{% block content %}<div class="main-content inner" id="home">    <header class="header">        <div class="container">            <nav class="py-3">                <div id="logo">                    <h1><a class="navbar-brand" href="/">Travel blog</a>                    </h1>                </div>                <label for="drop" class="toggle">Menu</label>                <input type="checkbox" id="drop"/>                <ul class="menu mt-2">                    <li class="active"><a href="/">Home</a></li>                    <li><a href="{% url 'blog:about' %}">About</a></li>                    <li>                        <!-- First Tier Drop Down -->                        <label for="drop-2" class="toggle">Drop Down <span class="fa fa-angle-down"                                                                           aria-hidden="true"></span> </label>                        <a href="#">More Info <span class="fa fa-angle-down" aria-hidden="true"></span></a>                        <input type="checkbox" id="drop-2"/>                        <ul>                            <li>                                <a href="{% url 'blog:restaurant' %}">Map of a restaurant</a>                            </li>                            <li>                                <a href="{% url 'blog:hotplace' %}">Map of famous places</a>                            </li>                        </ul>                    </li>                    <!--                        <li><a href="static/contact.html">Signup</a>-->                    {% if user.is_authenticated %}                    <li>                        <a href="#">{{ request.user }} 님접속</a>                        <a href="{% url 'logout' %}">Logout</a>                    </li>                    {% endif %}                    {% if not user.is_authenticated %}                    <li>                        <a href="{% url 'login' %}?next={{ request.path }}">Login</a>                    </li>                    <li>                        <a href="{% url 'signup' %}">Signup</a>                    </li>                    {% endif %}                </ul>            </nav>        </div>    </header></div><section class="portfolio-flyer py-5" id="gallery">    <div class="container pt-lg-3 pb-md-5">        <h3 class="tittle  text-center my-lg-5 my-3">{{ about_details.title }}</h3><p>여행 장소 : {{about_details.country}} / {{about_details.city}}</p>        <div class="row news-grids pb-lg-5 mt-3 mt-lg-5">            {% if about_details.photo %}            <img src="{{ about_details.photo.url }}" alt="">            {% endif %}            &nbsp;            <div class="vl"></div>            &nbsp;            {{ about_details.content|linebreaks }}        </div>        <!--        <hr>-->        <!--        <ul>-->        <!--            {% for comment in about_details.comment_set.all %}-->        <!--                <li>-->        <!--                    {{ comment.message }}-->        <!--                </li>-->        <!--            {% endfor %}-->        <!--        </ul>-->        {% if user.is_authenticated %}        <div class="modal-body">            <a href="{% url 'blog:about_update' about_details.id %}">                <input type="submit" class="btn btn-info" value="수정">            </a>            <a href="{% url 'blog:about_delete' about_details.id %}">                <input type="submit" class="btn btn-danger" value="삭제">            </a>        </div>        {% endif %}        <hr>        <!-- 댓글 구현 -->        <form action="{% url 'blog:comment_create' about_details.id %}" method="post" id="comment_form">            {% csrf_token %}            <input type="hidden" name="is_ajax" value="">            <div class="form-row">                <div class="col-8">                    {{ comment_form.text }}                </div>                <div class="col">                    <input type="submit" value="Comment" class="btn btn-outline-primary form-control">                </div>            </div>        </form>        <div id="docs_comment_list_area">            {% include 'blog/comment_list.html' %}        </div>    </div></section>{% endblock %}